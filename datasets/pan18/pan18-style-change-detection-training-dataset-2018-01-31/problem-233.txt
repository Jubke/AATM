You will then be able to choose a single Pokemon to go up against all the Pokemon in the gym. However you don't need to beat all of them, you will gain gym prestige for each Pokemon that you beat. You will still gain prestige even if you retreat from battle after defeating a Pokemon. Retreating is good to reduce your damage taken on your Pokemon if you think you aren't going to defeat the next one. You Pokemon can not faint from training, it's health will be reduced to a minimum of one before training automatically ends. There are also a variety of items that cannot be obtained at all currently, such as the master ball, varieties of incense and berries and other items like x attack, x defense, x miracle and troy disk. No, you do not need to be a part of the battle, as long as the gym is under your team's control and has an empty spot, you can assign a Pokemon to defend it. The table below shows the xp needed to get to the next level at any given level. As well as the total xp needed to get to the next level from any given level. There is no time limit, as long as the gym is at a high enough level and has room (ie. no one else beats you to placing a Pokemon at the gym) you can place your own. Thus I believe that the best way to train a gym is to look at the first Pokemon that you will be training against (the lowest CP gym Pokemon) and to counter that one, in both defense and attack (so their attacks are not very effective against you and your attacks are super effective against them) with a lower CP Pokemon. For example if they have a 500 CP water type Pokemon, you can use like a 300 CP grass type Pokemon to defeat it, then retreat from battle when you are facing the next Pokemon, and you will gain lots of prestige, approximately 600-800. Conversely if you defeat a 500 CP with a 1000CP pokemon you will only get about 100 prestige.