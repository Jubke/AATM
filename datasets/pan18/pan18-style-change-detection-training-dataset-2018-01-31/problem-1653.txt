If my child were closer 18, maybe as young as 16, I would approach it in the same way I would approach any decision I thought was not in their best interest: 

ask them about why they made this choice, how it makes them feel, and why they do or do not want to continue. There are reasons why they started and these need to be addressed. inundate them with information on the effects of smoking and drug addiction. They need to be aware that this is a gateway drug and that making this choice will make it easier to make other risky choices that they might not have otherwise made. explain how their actions affect me and our family explain my expectations of their behaviour and negotiate reasonable parameters which essentially prevent non-smokers from being affected by (coming into contact with) their smoking encourage them to put limits on their habit and identify when they would consider it bad/too much and seek help 

This may be why education is an important part of the solution. If their fear of the consequences is greater than the social rewards, it may be easier for them to quit. Unfortunately, the social rewards can be quite high. 

However, depending on their age, I would take more decisive action. For a younger child, I would treat this much more severely and invoke the aid of a counsellor, supervise their activities more closely so that they had less opportunity to engage in the behaviour, and make their teachers and the parents of their friends aware. For those parents that were not supportive of my concerns, I would not allow my child to be at their house or with their child unsupervised by someone I trust. In short, I would treat this as I would if they were doing any drug recreationally. 

Though I would be tempted to forbid them to smoke and forbid their friends too, this is likely to alienate them. As with any adult behaviour, now they have to deal with the consequences. It is their response to these natural consequences that will determine whether or not they continue since this started as a choice. 

If there was an easy answer, there would be a website for it. I thought it was heartening that "Youth smokers make more attempts to quit smoking than adult smokers." 

In the first and last example where there was really grave danger, I yelled really loud. In both cases my son was startled and froze immediately, but will this work every time? 

What to do in these situations where danger is acute and may become a matter of life and death or at least serious injury? 

In the second situation he actually knew he wasn't allow to bang stuff against the wall and he was testing my reaction. Which each reaction I provided (starting from a calm 'no' to getting up to actually yelling and running) he was banging the glass even harder and faster against the wall, so what worked in the other situations actually escalated this situation. 

Because of that I'm asking specifically what to do in such dangerous situations - if they happen. I just want to be prepared for such a bad situation instead of just resting on a sense of security. 

As with all children my son (16 months old) frequently gets himself in dangerous situations 

ask them about why they made this choice, how it makes them feel, and why they do or do not want to continue. There are reasons why they started and these need to be addressed. inundate them with information on the effects of smoking and drug addiction. They need to be aware that this is a gateway drug and that making this choice will make it easier to make other risky choices that they might not have otherwise made. explain how their actions affect me and our family explain my expectations of their behaviour and negotiate reasonable parameters which essentially prevent non-smokers from being affected by (coming into contact with) their smoking encourage them to put limits on their habit and identify when they would consider it bad/too much and seek help 

This may be why education is an important part of the solution. If their fear of the consequences is greater than the social rewards, it may be easier for them to quit. Unfortunately, the social rewards can be quite high. 

If my child were closer 18, maybe as young as 16, I would approach it in the same way I would approach any decision I thought was not in their best interest: 

Though I would be tempted to forbid them to smoke and forbid their friends too, this is likely to alienate them. As with any adult behaviour, now they have to deal with the consequences. It is their response to these natural consequences that will determine whether or not they continue since this started as a choice.