P.S. The practical answer to the question "when does undefined behavior strike?" is "10 minutes before you were planning to leave for the day". In the former case, you already need to include a standard header in order to use this so-called "core language" feature. 

Use as a guide the output from a good C++ compiler with optimisation, because it probably knows some tricks that you don't. But you'll probably be able to think of some improvements, because C++ doesn't necessarily convey to the compiler all information that might be useful for optimisation. For example, C++ doesn't have the C99 keyword restrict. Although in that particular case many C++ compilers (including MSVC) do now support it, so use it where possible. Here's some code (full program follows later in the question): In C++ (and C), in order to resolve the grammar of code, you sometimes need to know whether something is a type or not. For example: 

Code it in assembler, with different versions for each significant architecture variant you support. 

The reasons you might want to separate are: But what about a class template with a dependent base class? 

The traditional answer to the question in C and C++03 has been "across statement boundaries we make types explicit, within expressions they are usually implicit but we can make them explicit with casts". C++11 and C++1y introduce type deduction tools so that you can leave out the type in new places. Of course if you mean, "I want it to be fast, but not to the extent of going outside C# or C++", then the answer's different ;-) Unfortunately the only way to be sure how close it is is to write both and test them, which kind of misses the point that writing the C++ version is a bunch of extra effort. However, you might be able to get a rough idea by hacking some quick code which approximates the processing you want to do, without necessarily doing all of it or getting it right. If you algorithm is going to loop over all the pixels and do a few FP ops per pixel, then hacking together a rough benchmark should take all of half an hour.